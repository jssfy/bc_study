
/etc/mysql/my.cnf

# ALTER DATABASE tz8_dev CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci;
  character_set_database does not have to be utf8mb4

ALTER TABLE mission MODIFY COLUMN name varchar(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'æŒ‘æˆ˜åç§°';
ALTER TABLE period_mission MODIFY COLUMN name varchar(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL;

ALTER TABLE user MODIFY COLUMN nickname varchar(45) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'æ˜µç§°';
ALTER TABLE user MODIFY COLUMN username varchar(45) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'ç”¨æˆ·åç§°';

ALTER TABLE account MODIFY COLUMN nickname varchar(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL;


ALTER TABLE states CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;


update user set nickname = "ğŸ‘£", username = "ğŸ‘£" where id=2;
  note: to copy the above line instead of [update user set nickname = "\U+1F463", username = "\U+1F463" where id=2;];
update account set nickname = "ğŸ‘£" where id=186;

------ 2016-10-08 14:47:52
http://stackoverflow.com/questions/32391005/php-function-imagettftext-to-write-text-with-smileys/32455685

To answer your question: you can't have colored smileys using imagefttext. I'm sorry ğŸ˜‰.

I suggest You using PHP ImageMagick library. Though I didn't try it with emoji I'we encountered the same problem as yours with other Unicode characters when tried to render text with DG.
BTW migrating to IM is good idea at least because of better performance and less quirks in it.

https://github.com/stv0g/unicode-emoji/blob/master/symbola/Symbola.ttf
  Symbola.ttf does not help.

http://ufonts.com/download/maiandra-gd/30084.html
  Maiandra GD Font .ttf (TrueType Font)

----- 2016-10-08 14:37:16

http://blog.csdn.net/tornge/article/details/51272908
ä»Šå¤©åˆšåšäº†ä¸€ä¸ªå¾®ä¿¡åº”ç”¨ï¼Œåœ¨è·å–å¾®ä¿¡æ˜µç§°çš„è¿‡ç¨‹ä¸­æŠ¥é”™äº†ï¼Œç»æŸ¥åŸå› æ˜¯å¾®ä¿¡æ˜µç§°ä¸­åŒ…å«emojiå­—ç¬¦ï¼Œåœ¨å†™å…¥æ•°æ®åº“çš„æ—¶å€™å‡ºé”™ï¼Œæ‰€ä»¥æƒ³åŠæ³•åœ¨å†™å…¥ä¹‹å‰æŠŠè¿™äº›å­—ç¬¦è¿‡æ»¤æ‰ï¼Œäºæ˜¯åœ¨ç½‘ä¸Šæ‰¾åˆ°ä¸€ä¸ªæ–¹æ³•ï¼Œè®°å½•ä¸€ä¸‹ã€‚
ç§»é™¤å¾®ä¿¡æ˜µç§°ä¸­çš„emojiå­—ç¬¦ï¼š

function removeEmoji($text) {

    $clean_text = "";

    // Match Emoticons
    $regexEmoticons = '/[\x{1F600}-\x{1F64F}]/u';
    $clean_text = preg_replace($regexEmoticons, '', $text);

    // Match Miscellaneous Symbols and Pictographs
    $regexSymbols = '/[\x{1F300}-\x{1F5FF}]/u';
    $clean_text = preg_replace($regexSymbols, '', $clean_text);

    // Match Transport And Map Symbols
    $regexTransport = '/[\x{1F680}-\x{1F6FF}]/u';
    $clean_text = preg_replace($regexTransport, '', $clean_text);

    // Match Miscellaneous Symbols
    $regexMisc = '/[\x{2600}-\x{26FF}]/u';
    $clean_text = preg_replace($regexMisc, '', $clean_text);

    // Match Dingbats
    $regexDingbats = '/[\x{2700}-\x{27BF}]/u';
    $clean_text = preg_replace($regexDingbats, '', $clean_text);

    return $clean_text;
}

?? https://github.com/iamcal/php-emoji


------------ 2016-10-08 14:04:51

set names utf8mb4;


----------- 2016-09-18 18:46:43
test:

insert into mission set name="ä¸€ğŸ˜„äºŒ", announce="ä¸€ğŸ˜„äºŒ";


test:
mysql> show variables like "%character%";
+--------------------------+----------------------------+
| Variable_name            | Value                      |
+--------------------------+----------------------------+
| character_set_client     | utf8mb4                    |
| character_set_connection | utf8mb4                    |
| character_set_database   | utf8mb4                    |
| character_set_filesystem | binary                     |
| character_set_results    | utf8mb4                    |
| character_set_server     | latin1                     |
| character_set_system     | utf8                       |
| character_sets_dir       | /usr/share/mysql/charsets/ |
+--------------------------+----------------------------+
8 rows in set (0.00 sec)


prod:
mysql> show variables like "%character%";
+--------------------------+----------------------------------+
| Variable_name            | Value                            |
+--------------------------+----------------------------------+
| character_set_client     | utf8mb4                          |
| character_set_connection | utf8mb4                          |
| character_set_database   | utf8                             |
| character_set_filesystem | binary                           |
| character_set_results    | utf8mb4                          |
| character_set_server     | utf8mb4                          |
| character_set_system     | utf8                             |
| character_sets_dir       | /usr/local/mysql/share/charsets/ |
+--------------------------+----------------------------------+
8 rows in set (0.00 sec)


---------- 2016-09-18 18:34:18
online test: 
mysql> show create table account;

| account | CREATE TABLE `account` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `open_id` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `union_id` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `avatar` varchar(1024) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `nickname` varchar(200) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `username` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `gender` int(11) DEFAULT '0' COMMENT '1: ç”·, 2: å¥³',
  `province` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `city` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `country` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `birthday` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT '',
  `privilege` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT '',
  `interest` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT '',
  `phone` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT '',
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `subscribed` int(11) NOT NULL DEFAULT '-1' COMMENT '0: false, 1: true, -1: unknown',
  PRIMARY KEY (`id`),
  UNIQUE KEY `phone_index` (`phone`)
) ENGINE=InnoDB AUTO_INCREMENT=217 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci |

mysql> show create table user;
| user  | CREATE TABLE `user` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `account_type` varchar(10) DEFAULT NULL COMMENT 'è´¦å·ç±»å‹',
  `account_id` bigint(20) DEFAULT '-1' COMMENT 'è´¦æˆ·ID',
  `nickname` varchar(45) DEFAULT NULL COMMENT 'æ˜µç§°',
  `username` varchar(45) NOT NULL COMMENT 'ç”¨æˆ·åç§°',
  `passwd` varchar(45) DEFAULT NULL COMMENT 'å¯†ç ',
  `head_img` varchar(1024) DEFAULT NULL COMMENT 'å¤´åƒ',
  `gender` int(11) NOT NULL DEFAULT '0' COMMENT 'æ€§åˆ«',
  `birthday` datetime DEFAULT NULL COMMENT 'å‡ºç”Ÿæ—¥æœŸ',
  `phone` varchar(45) DEFAULT NULL COMMENT 'ç”µè¯',
  `regist_time` datetime DEFAULT NULL COMMENT 'æ³¨å†Œæ—¶é—´',
  `announce` varchar(45) DEFAULT NULL COMMENT 'ä¸ªæ€§ç­¾å',
  `province` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `city` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `country` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `balance` int(11) DEFAULT '0' COMMENT 'ç”¨æˆ·è´¦æˆ·ä½™é¢',
  `inviter_id` bigint(20) NOT NULL DEFAULT '0' COMMENT '0: unknown',
  `invite_time` datetime DEFAULT NULL COMMENT 'é‚€è¯·æ—¶é—´',
  `invite_mode` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=19 DEFAULT CHARSET=utf8mb4 COMMENT='ç”¨æˆ·åŸºæœ¬ä¿¡æ¯' |



--------- 2016-09-18 18:25:23
chaning the table character set will apply to all columns. 
  to change some specific column to a specific character set: [be aware of the execution order]
    ALTER TABLE states MODIFY COLUMN name varchar(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL;
note: to insert emoji, the COLLATE setting is not necessary.


mysql> ALTER TABLE states CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci; 
ERROR 1366 (HY000): Incorrect string value: '\xF0\x9F\x98\x84\xE4\xBA...' for column 'name' at row 4
mysql> delete from states where code="ar";
Query OK, 1 row affected (0.02 sec)

mysql> ALTER TABLE states CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;

mysql> insert into states set code="ar", name="ä¸€\U+1F604äºŒ", population=11;    ERROR 1366 (HY000): Incorrect string value: '\xF0\x9F\x98\x84\xE4\xBA...' for column 'name' at row 1
mysql> ALTER TABLE states CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
Query OK, 15 rows affected (0.07 sec)
Records: 15  Duplicates: 0  Warnings: 0

mysql> insert into states set code="ar", name="ä¸€\U+1F604äºŒ", population=11;    Query OK, 1 row affected (0.01 sec)


--------- 2016-09-18 17:56:44
be careful: copy the below line correctly instead of copying (insert into states set code="ar", name="ä¸€\U+1F604äºŒ", population=11;), which will generate plain strings like the "ae" line in the below table.

mysql> insert into states set code="ar", name="ä¸€ğŸ˜„äºŒ", population=11;
Query OK, 1 row affected (0.01 sec)

mysql> select * from states;
+------+----------------------------+------------+
| code | name                       | population |
+------+----------------------------+------------+
| ae   | ä¸€U+1F604äºŒä¸€U+1F604äºŒ     |         11 |
| AH   | anhuaye                    |          0 |
| aq   | ä¸€U+1F604äºŒä¸€U+1F604äºŒ     |         11 |
| ar   | ä¸€ğŸ˜„äºŒ                       |         11 |
| aw   | ä¸€U+1F604äºŒä¸€U+1F604äºŒ     |         11 |
| BR   | Brazil                     |   17015000 |
| CA   | California                 |     114000 |
| FL   | Florida                    |    5922700 |
| IN   | Indiana                    |  101366000 |
| MA   | Massatrusit                |    5963400 |
| NY   | NewYork                    |    1886000 |
| OL   | Orland                     |  127758000 |
| PH   | Philadelphia               |   14694000 |
| TX   | Texus                      |    8216700 |
| UT   | Utar                       |   27357000 |
| YA   | yeanhua                    |          0 |
+------+----------------------------+------------+
16 rows in set (0.00 sec)

mysql> show create table states;
+--------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table  | Create Table                                                                                                                                                                                                                                     |
+--------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| states | CREATE TABLE `states` (
  `code` char(2) NOT NULL,
  `name` varchar(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `population` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`code`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 |


-------- 2016-09-18 17:44:14
below works: 
| country | CREATE TABLE `country` (
  `code` char(2) NOT NULL,
  `name` varchar(500) DEFAULT NULL,
  `population` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`code`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 |

---------- 2016-09-18 17:37:44

mysql> ALTER DATABASE yii2basic CHARACTER SET = utf8 COLLATE = utf8_unicode_ci; Query OK, 1 row affected (0.00 sec)

mysql> show variables like "%character%";
+--------------------------+----------------------------+
| Variable_name            | Value                      |
+--------------------------+----------------------------+
| character_set_client     | utf8                       |
| character_set_connection | utf8                       |
| character_set_database   | utf8                       |
| character_set_filesystem | binary                     |
| character_set_results    | utf8                       |
| character_set_server     | latin1                     |
| character_set_system     | utf8                       |
| character_sets_dir       | /usr/share/mysql/charsets/ |
+--------------------------+----------------------------+
8 rows in set (0.00 sec)

mysql> ALTER DATABASE yii2basic CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci;
Query OK, 1 row affected (0.00 sec)

mysql> show variables like "%character%";                                       +--------------------------+----------------------------+
| Variable_name            | Value                      |
+--------------------------+----------------------------+
| character_set_client     | utf8                       |
| character_set_connection | utf8                       |
| character_set_database   | utf8mb4                    |
| character_set_filesystem | binary                     |
| character_set_results    | utf8                       |
| character_set_server     | latin1                     |
| character_set_system     | utf8                       |
| character_sets_dir       | /usr/share/mysql/charsets/ |
+--------------------------+----------------------------+
8 rows in set (0.00 sec)

------------ 2016-09-18 17:26:55
online test:
mysql> show create database tz8_dev;
+----------+------------------------------------------------------------------+
| Database | Create Database                                                  |
+----------+------------------------------------------------------------------+
| tz8_dev  | CREATE DATABASE `tz8_dev` /*!40100 DEFAULT CHARACTER SET utf8 */ |
+----------+------------------------------------------------------------------+
1 row in set (0.00 sec)

offline test:
mysql> show create database tz8_dev;
+----------+---------------------------------------------------------------------+
| Database | Create Database                                                     |
+----------+---------------------------------------------------------------------+
| tz8_dev  | CREATE DATABASE `tz8_dev` /*!40100 DEFAULT CHARACTER SET utf8mb4 */ |
+----------+---------------------------------------------------------------------+
1 row in set (0.01 sec)

------- 2016-09-18 15:47:32
after modifying username for wechat, getUserInfo does not work immediately, not sure how long to take.

    public static function getUserInfo($openid, $accessToken){
        $url = 'https://api.weixin.qq.com/sns/userinfo?access_token='.$accessToken.'&openid='.$openid.'&lang=zh_CN';
        $response = static::get_contents($url);
        error_log("get user info: ");
        error_log(json_encode($response));
        return $response;
    }

https://api.weixin.qq.com/sns/userinfo?access_token=0YF3UlVAIH18zZhWcC1pkQZXmvCbsSfWAzyij-xvydVfMaVvR3OuZIbEBqJKUHiZh77hy4pOs2bDRAavXjzQkIPAN0eGvsW3xinnv_2h-I8&openid=ook-7wLch8xSS-mM-urjLCCs91n0&lang=zh_CN
https://api.weixin.qq.com/sns/userinfo?access_token=vm3dA82x7C8BilGxXuHIoT-ayo24yXIecvuvsGZ55PJ7TCxmcPxJOKvTMa4uc69vIhmdBSt3JniINt4a0aAOrTXyVRWMW_DjAHv24q_jlkw&openid=ook-7wLch8xSS-mM-urjLCCs91n0&lang=zh_CN

----------- 2016-09-18 15:11:33

| user  | CREATE TABLE `user` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `account_type` varchar(10) DEFAULT NULL COMMENT 'è´¦å·ç±»å‹',
  `account_id` bigint(20) DEFAULT '-1' COMMENT 'è´¦æˆ·ID',
  `nickname` varchar(45) DEFAULT NULL COMMENT 'æ˜µç§°',
  `username` varchar(45) NOT NULL COMMENT 'ç”¨æˆ·åç§°',
  `passwd` varchar(45) DEFAULT NULL COMMENT 'å¯†ç ',
  `head_img` varchar(1024) DEFAULT NULL COMMENT 'å¤´åƒ',
  `gender` int(11) NOT NULL DEFAULT '0' COMMENT 'æ€§åˆ«',
  `birthday` datetime DEFAULT NULL COMMENT 'å‡ºç”Ÿæ—¥æœŸ',
  `phone` varchar(45) DEFAULT NULL COMMENT 'ç”µè¯',
  `regist_time` datetime DEFAULT NULL COMMENT 'æ³¨å†Œæ—¶é—´',
  `announce` varchar(45) DEFAULT NULL COMMENT 'ä¸ªæ€§ç­¾å',
  `province` varchar(50) DEFAULT NULL,
  `city` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `country` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `balance` int(11) DEFAULT '0' COMMENT 'ç”¨æˆ·è´¦æˆ·ä½™é¢',
  `inviter_id` bigint(20) NOT NULL DEFAULT '0',
  `invite_time` datetime DEFAULT NULL COMMENT 'é‚€è¯·æ—¶é—´',
  `invite_mode` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=16 DEFAULT CHARSET=utf8mb4 COMMENT='ç”¨æˆ·åŸºæœ¬ä¿¡æ¯' |

ALTER TABLE user MODIFY COLUMN nickname varchar(45) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'æ˜µç§°';
ALTER TABLE user MODIFY COLUMN username varchar(45) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'ç”¨æˆ·åç§°';

update mission set name="\U+1F463 is \U+1F463" where id=2087;
  if sent from wechat, the copied result is: <img class="emoji emoji1f463" text="_web" src="/zh_CN/htmledition/v2/images/spacer.gif">

| account | CREATE TABLE `account` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `open_id` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `union_id` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `avatar` varchar(1024) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `nickname` varchar(200) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `username` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `gender` int(11) DEFAULT '0' COMMENT '1: ç”·, 2: å¥³',
  `province` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `city` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `country` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `birthday` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT '',
  `privilege` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT '',
  `interest` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT '',
  `phone` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT '',
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `subscribed` int(11) NOT NULL DEFAULT '-1' COMMENT '0: false, 1: true, -1: unknown',
  PRIMARY KEY (`id`),
  UNIQUE KEY `phone_index` (`phone`)
) ENGINE=InnoDB AUTO_INCREMENT=203 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci |
ALTER TABLE account MODIFY COLUMN nickname varchar(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL;

ğŸ‘€

footprint: [http://www.fuhaodq.com/emoji/list_7.html]
  <img class="emoji emoji1f463" text="_web" src="/zh_CN/htmledition/v2/images/spacer.gif">
ğŸ‘£
  to get the symbols from http://www.fuhaodq.com/emoji/list_7.html

----------- 2016-09-18 14:53:31

| mission | CREATE TABLE `mission` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'å…·ä½“æŒ‘æˆ˜é¡¹ç›®ID',
  `tmpl_id` bigint(20) DEFAULT '0' COMMENT 'æŒ‘æˆ˜æ¨¡æ¿ID',
  `name` varchar(200) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'æŒ‘æˆ˜åç§°',
  `announce` varchar(64) CHARACTER SET utf8mb4 DEFAULT NULL COMMENT 'æŒ‘æˆ˜å®£è¨€',
  `declare` varchar(128) CHARACTER SET utf8mb4 DEFAULT NULL COMMENT 'æŒ‘æˆ˜è¯´æ˜',
  `description` varchar(128) CHARACTER SET utf8mb4 DEFAULT NULL COMMENT 'æŒ‘æˆ˜æè¿°',
  `creator_id` bigint(20) DEFAULT NULL COMMENT 'åˆ›å»ºè€…ID',
  `create_time` datetime DEFAULT NULL COMMENT 'åˆ›å»ºæ—¶é—´',
  `start_time` datetime DEFAULT NULL COMMENT 'å¼€å§‹æ—¶é—´',
  `stop_time` datetime DEFAULT NULL COMMENT 'ç»“æŸæ—¶é—´',
  `end_time` datetime DEFAULT NULL COMMENT 'ç»ˆæ­¢æ—¶é—´',
  `ticket` float DEFAULT '1' COMMENT 'æ‰¿è¯ºé‡‘',
  `ticket_unit` varchar(45) CHARACTER SET utf8mb4 DEFAULT NULL COMMENT 'yuan',
  `joined_count` int(11) DEFAULT '0' COMMENT 'å‚ä¸äººæ•°',
  `max_user` int(11) DEFAULT '50' COMMENT 'æœ€å¤šå‚ä¸äººæ•°',
  `min_user` int(11) DEFAULT '1' COMMENT 'æœ€å°‘å‚ä¸äººæ•°',
  `status` int(11) DEFAULT '0' COMMENT 'ä»»åŠ¡çŠ¶æ€',
  `checkin_type` int(11) DEFAULT '0' COMMENT 'æ‰“å¡ç±»å‹',
  `checkin_min_count` int(11) DEFAULT '1' COMMENT 'æœ€å°‘æ‰“å¡æ¬¡æ•°',
  `reward_total` float DEFAULT '0' COMMENT 'æ€»å¥–é‡‘æ± ',
  `reward_send` float DEFAULT '0' COMMENT 'å·²å‘é€çº¢åŒ…æ€»é¢',
  `checkin_photo` varchar(10240) CHARACTER SET utf8mb4 DEFAULT NULL COMMENT 'æ‰“å¡ç¤ºä¾‹å›¾ç‰‡',
  `checkin_mode` int(11) DEFAULT '0' COMMENT 'æ‰“å¡æ¨¡å¼',
  `checkin_unlike_invalid` int(11) DEFAULT '50' COMMENT 'æ‰“å¡è¢«è¸©æ— æ•ˆæ•°',
  `checkin_like_valid` int(11) DEFAULT '0' COMMENT 'æ‰“å¡è¢«èµæœ‰æ•ˆæ•°',
  `reward_calc_type` int(11) NOT NULL DEFAULT '0' COMMENT 'çº¢åŒ…åˆ†å‘ç±»å‹',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2082 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='å…·ä½“æŒ‘æˆ˜' |

below is php string copy from annouce to name, ok.
[Sun Sep 18 14:51:35 2016] {"creator_id":11,"create_time":"2016-09-18","tmpl_id":0,"name":"ä¸€ğŸ˜„äºŒ","announce":"ä¸€ğŸ˜„äºŒ","start_time":"2016/09/18 15:00","stop_time":"2016/09/19 15:00","checkin_unlike_invalid":50,"checkin_like_valid":0,"ticket":"1000","checkin_type":"1","reward_calc_type":1,"description":""}
[Sun Sep 18 14:51:35 2016] 10.12.0.28:62921 [200]: /ajax/mission/create
[Sun Sep 18 14:51:36 2016] 10.12.0.28:62922 [302]: /mission/orderdone?oid=2105&res=1&mt=0
[Sun Sep 18 14:51:36 2016] 10.12.0.28:62923 [302]: /mission/index?mid=2081&mt=0

below is from db read
[Sun Sep 18 14:51:36 2016] {"id":2081,"tmpl_id":0,"name":"ä¸€?äºŒ","announce":"ä¸€ğŸ˜„äºŒ","declare":null,"description":"","creator_id":11,"create_time":"2016-09-18 00:00:00","start_time":"2016-09-18 15:00:00","stop_time":"2016-09-19 15:00:00","end_time":"2016-09-20 15:00:00","ticket":1000,"ticket_unit":null,"joined_count":1,"max_user":50,"min_user":1,"status":0,"checkin_type":1,"checkin_min_count":1,"reward_total":1000,"reward_send":0,"checkin_photo":null,"checkin_mode":0,"checkin_unlike_invalid":50,"checkin_like_valid":0,"reward_calc_type":1}

ALTER TABLE mission MODIFY COLUMN name varchar(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'æŒ‘æˆ˜åç§°';
| mission | CREATE TABLE `mission` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'å…·ä½“æŒ‘æˆ˜é¡¹ç›®ID',
  `tmpl_id` bigint(20) DEFAULT '0' COMMENT 'æŒ‘æˆ˜æ¨¡æ¿ID',
  `name` varchar(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'æŒ‘æˆ˜åç§°',
  `announce` varchar(64) CHARACTER SET utf8mb4 DEFAULT NULL COMMENT 'æŒ‘æˆ˜å®£è¨€',
  `declare` varchar(128) CHARACTER SET utf8mb4 DEFAULT NULL COMMENT 'æŒ‘æˆ˜è¯´æ˜',
  `description` varchar(128) CHARACTER SET utf8mb4 DEFAULT NULL COMMENT 'æŒ‘æˆ˜æè¿°',

select results does not show correctly by default: 

mysql> select * from test;
+----+---------+------------+
| id | name    | population |
+----+---------+------------+
|  1 | ?       |          1 |
|  2 | ?       |          1 |
|  3 | ä¸€?äºŒ   |         12 |
+----+---------+------------+
3 rows in set (0.00 sec)

FIX!!!
mysql> set names utf8mb4;
Query OK, 0 rows affected (0.00 sec)

mysql> select * from test;
+----+------------+------------+
| id | name       | population |
+----+------------+------------+
|  1 | ğŸ˜„           |          1 |
|  2 | ğŸ˜„           |          1 |
|  3 | ä¸€ğŸ˜„äºŒ       |         12 |
+----+------------+------------+
3 rows in set (0.00 sec)

or /etc/mysql/my.cnf
[mysql]
default-character-set = utf8mb4

ä¸€ğŸ˜„äºŒ

how to insert manually:
mysql> insert into test set name="ä¸€\U+1F604äºŒä¸€\U+1F604äºŒ", population=11;
Query OK, 1 row affected (0.01 sec)

mysql> select * from test;
+----+----------------------+------------+
| id | name                 | population |
+----+----------------------+------------+
|  1 | ğŸ˜„                     |          1 |
|  2 | ğŸ˜„                     |          1 |
|  3 | ä¸€ğŸ˜„äºŒ                 |         12 |
|  4 | ä¸€ğŸ˜„äºŒä¸€ğŸ˜„äºŒ             |         11 |
+----+----------------------+------------+


---------- 2016-09-18 12:28:08

mission create:

announce: ä¸€"ç¬‘è„¸"äºŒ
ä¸€: "\u4e00"
äºŒ: "\u4e8c"
[Sun Sep 18 12:27:03 2016] {"mt":"0","Mission":{"announce":"\u4e00\ud83d\ude04\u4e8c","ticket":"1000","start_time":"2016\/09\/18 13:00","stop_time":"2016\/09\/19 13:00","checkin_type":"1","description":""}}

name: "ç¬‘è„¸"
[18-Sep-2016 06:13:16 UTC] test create is triggered with post data: {"name":"\ud83d\ude04","population":"1","button":"create"}

ALTER DATABASE yii2basic CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci;
ALTER TABLE test CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
ALTER TABLE test CHANGE name name VARCHAR(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

mysql> show variables like "%character%";
+--------------------------+----------------------------+
| Variable_name            | Value                      |
+--------------------------+----------------------------+
| character_set_client     | utf8mb4                    |
| character_set_connection | utf8mb4                    |
| character_set_database   | utf8mb4                    |
| character_set_filesystem | binary                     |
| character_set_results    | utf8mb4                    |
| character_set_server     | utf8mb4                    |
| character_set_system     | utf8                       |
| character_sets_dir       | /usr/share/mysql/charsets/ |
+--------------------------+----------------------------+
8 rows in set (0.00 sec)

mysql> show variables like "%collation%";
+----------------------+--------------------+
| Variable_name        | Value              |
+----------------------+--------------------+
| collation_connection | utf8mb4_unicode_ci |
| collation_database   | utf8mb4_unicode_ci |
| collation_server     | utf8mb4_unicode_ci |
+----------------------+--------------------+
3 rows in set (0.00 sec)

http://zhidao.baidu.com/link?url=l7hIcbuKAIv-7PVsiBMR7456APCbVSAgof2OgXkzbcb7vIxPDreO5CCPwj5TsRfYU3hKQQp9CeNQDlqts7De7nCE4OTiXOde8_eXaVvkbqO
4ã€åœ¨è·å–æ•°æ®åº“è¿æ¥çš„æ—¶å€™æ‰§è¡Œsql:set names utf8mb4ï¼›æˆ‘ä½¿ç”¨çš„æ˜¯alibabaçš„å¼€æºæ•°æ®åº“è¿æ¥æ± ç¨‹åºï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­å¢åŠ ä¸€è¡Œå¦‚ä¸‹é…ç½®
<property name="connectionInitSqls" value="set names utf8mb4ï¼›" />
é‡æ–°å¯åŠ¨åº”ç”¨ç¨‹åºï¼Œé—®é¢˜è§£å†³ã€‚

http://bbs.csdn.net/topics/390854608
æŠ˜è…¾äº†ä¸¤å¤©ï¼Œmysqlå·²ç»å‡çº§åˆ°äº†5.6.2ï¼Œæ‰€æœ‰ç¼–ç éƒ½å·²è®¾ä¸ºutf8mb4
å˜é‡è¾“å‡ºå¦‚ä¸‹ï¼š
character_set_client     | utf8mb4                    
character_set_connection | utf8mb4                    
character_set_database   | utf8mb4                    
character_set_filesystem | binary                     
character_set_results    | utf8mb4                    
character_set_server     | utf8mb4                    
character_set_system     | utf8                       
character_sets_dir       | /usr/share/mysql/charsets/ 
collation_connection | utf8mb4_general_ci 
collation_database   | utf8mb4_unicode_ci 
collation_server     | utf8mb4_unicode_ci 

å¯¹åº”è¡¨ä»¥åŠå­—æ®µâ€˜messageâ€™ ç¼–ç éƒ½å·²ç»è®¾ä¸ºutf8mb4_bin
ç”¨query()å†™å…¥çš„æ—¶å€™ï¼Œè¿˜æ˜¯æŠ¥é”™â€œIncorrect string value: '\xF0\x9F\x98\x8A\xF0\x9F...' for column 'message' at row 1â€
æ±‚é—®é¢˜å…¶ä»–å¯èƒ½æ€§ã€‚ã€‚ã€‚ 

Mysqlç‰ˆæœ¬ >= MySQL 5.5.3
æŠŠæ•°æ®åº“å­—ç¬¦é›†ä¿®æ”¹ä¸º utf8mb4
ä¿®æ”¹è¿æ¥æ•°æ®åº“çš„ç¼–ç 
init-connect='SET NAMES utf8mb4'
character-set-server=utf8mb4 

FIX !!!
/var/www/html/yii/basic/config/db.php
<?php
return [
    'class' => 'yii\db\Connection',
    'dsn' => 'mysql:host=10.12.0.1;dbname=yii2basic',
    'username' => 'root',
    'password' => 'xxxx',
    'charset' => 'utf8mb4',
];

http://www.linuxidc.com/Linux/2015-04/115840.htm
utf8mb4å’Œutf8åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼ŸåŸæ¥ä»¥å¾€çš„mysqlçš„utf8ä¸€ä¸ªå­—ç¬¦æœ€å¤š3å­—èŠ‚ï¼Œè€Œutf8mb4åˆ™æ‰©å±•åˆ°ä¸€ä¸ªå­—ç¬¦æœ€å¤šèƒ½æœ‰4å­—èŠ‚ï¼Œæ‰€ä»¥èƒ½æ”¯æŒæ›´å¤šçš„å­—ç¬¦é›†ã€‚
è§£å†³æ–¹æ¡ˆï¼šå°†Mysqlçš„ç¼–ç ä»utf8è½¬æ¢æˆutf8mb4ã€‚
éœ€è¦ >= MySQL 5.5.3ç‰ˆæœ¬ã€ä»åº“ä¹Ÿå¿…é¡»æ˜¯5.5çš„äº†ã€ä½ç‰ˆæœ¬ä¸æ”¯æŒè¿™ä¸ªå­—ç¬¦é›†ã€å¤åˆ¶æŠ¥é”™
åœæ­¢MySQL ServeræœåŠ¡
ä¿®æ”¹ my.cnfæˆ–è€…mysql.ini
[client]
 default-character-set = utf8mb4
[mysql]
 default-character-set = utf8mb4
[mysqld]
 character-set-client-handshake = FALSE
 character-set-server = utf8mb4
 collation-server = utf8mb4_unicode_ci
 init_connect='SET NAMES utf8mb4'
é‡å¯ MySQL Serverã€æ£€æŸ¥å­—ç¬¦é›†
mysql> SHOW VARIABLES WHERE Variable_name LIKE 'character\_set\_%' OR Variable_name LIKE 'collation%';

below not necessary as from test with mobile web:
  [client]
  # default-character-set = utf8mb4
  [mysql]
   default-character-set = utf8mb4
  [mysqld]
   character-set-client-handshake = FALSE
   character-set-server = utf8mb4
   collation-server = utf8mb4_unicode_ci
   init_connect='SET NAMES utf8mb4'

--------- 2016-09-18 10:21:38
https://my.oschina.net/wingyiu/blog/153357

emojiè¡¨æƒ…

åœ¨åšç§»åŠ¨åº”ç”¨æ—¶ï¼Œä¼šé‡åˆ°iosç”¨æˆ·ä¼šåœ¨æ–‡æœ¬çš„åŒºåŸŸè¾“å…¥emojiè¡¨æƒ…ï¼Œå¦‚æœä¸åšä¸€å®šå¤„ç†ï¼Œå°±ä¼šå¯¼è‡´æ’å…¥æ•°æ®åº“å¼‚å¸¸ã€‚

 ä¸€ ä»€ä¹ˆæ˜¯Emoji   
      emojiå°±æ˜¯è¡¨æƒ…ç¬¦å·ï¼›è¯ä¹‰æ¥è‡ªæ—¥è¯­ï¼ˆãˆã‚‚ã˜ï¼Œe-mojiï¼Œmojiåœ¨æ—¥è¯­ä¸­çš„å«ä¹‰æ˜¯å­—ç¬¦ï¼‰
ã€€ã€€è¡¨æƒ…ç¬¦å·ç°å·²æ™®éåº”ç”¨äºæ‰‹æœºçŸ­ä¿¡å’Œç½‘ç»œèŠå¤©è½¯ä»¶ã€‚
ã€€ã€€emojiè¡¨æƒ…ç¬¦å·ï¼Œåœ¨å¤–å›½çš„æ‰‹æœºçŸ­ä¿¡é‡Œé¢å·²ç»æ˜¯å¾ˆæµè¡Œä½¿ç”¨çš„ä¸€ç§è¡¨æƒ…ã€‚ 
äºŒ Emojiè¡¨æƒ…ç¬¦å·é—®é¢˜
   1 é—®é¢˜ï¼š
     IOSç‰ˆæœ¬ä¹‹é—´å‘é€çš„Emojiè¡¨æƒ…ç¬¦å·ä¸å…¼å®¹ï¼Œåªçœ‹åˆ°æ–¹å—
     ä¸åŒIOSç‰ˆæœ¬åœ¨æ•°æ®åº“å­˜æ•°æ®æ—¶ï¼Œæœ‰æ—¶ä¼šå‘ç”Ÿç³»ç»Ÿé”™è¯¯
   2 ç°è±¡ï¼š
     IOS 4 è¾“å…¥Emojiè¡¨æƒ…ç¬¦ï¼Œåœ¨IOS5.01 æ˜¾ç¤ºæ­£å¸¸ï¼Œåœ¨IOS5.1ä¸­ï¼ˆå¤§é™†ç‰ˆï¼‰æ˜¾ç°ä¸ºæ–¹å—ï¼Œ ä½†IOS5.01/5.1è¾“å…¥çš„è¡¨æƒ…ç¬¦å·ï¼Œæ˜¾ç¤ºæ­£      å¸¸
     IOS5.01/5.1 è¾“å…¥è¡¨æƒ…ç¬¦ï¼Œåœ¨IOS5.01/5.1ä¸­æ˜¾ç¤ºæ­£å¸¸ï¼Œä½†åœ¨IOS4.Xæ˜¾ç¤ºä¸ºæ–¹å—
     è¾“å…¥Emojiå…¥å¸–å­æ­£æ–‡ï¼Œ å¯æ­£å¸¸å­˜å‚¨ã€‚ ä½†ç”¨æˆ·æ˜µç§°åœ¨IOS4.X è¾“å…¥Emojiï¼Œç³»ç»Ÿæ­£å¸¸ï¼Œ è€ŒIOS5.01/5.1åˆ™æç¤ºç³»ç»Ÿé”™è¯¯ã€‚
   3 æœ¬è´¨:
     iOS 5 and OS X 10.7 (Lion) use the Unicode 6.0 standard â€˜unifiedâ€™ code points for emoji.
     iOS 5 Emoji  é‡‡ç”¨Unicode 6 æ ‡å‡†æ¥ç»Ÿä¸€code points 

     iOS 4 on SoftBank iPhones used a set of unofficial code points in the Unicode Private Use Area, and so aren't      compatible with any other systems
     iOS 4 é‡‡ç”¨SoftBank Unicodeï¼Œ ä¸€ç§éå®˜æ–¹çš„, é‡‡ç”¨ç§æœ‰Unicode åŒºåŸŸã€‚
   4 ä¸¾ä¾‹:
      one emoji symbol "tiger", it is "\U0001f42f" in iOS5, but "\ue050" in earlier iOS version
    è™è„¸Emojiç¬¦å·åœ¨iOS5 ä¸ºUnicodeï¼š\U0001f42fï¼›è€Œåœ¨IOS4.x ä¸ºï¼š\ue050 (SoftBank ç¼–ç )
    å¦å¤–ï¼š æŒ‰ç†è®²ï¼Œ ä»iOS5 åº”è¯¥å…¼å®¹ä»¥å‰ç‰ˆæœ¬çš„emoji, ä½†ç°åœ¨å‡ºç°5.01ç‰ˆæœ¬å®Œç¾å…¼å®¹ï¼ˆæ— è®ºå¤§é™†ç‰ˆï¼Œç¾ç‰ˆï¼Œè¿˜æ˜¯æ¸¯ç‰ˆï¼‰ï¼Œ è€Œ5.1     å¤§é™†ç‰ˆå‡ºç°äº†ä¸å…¼å®¹ç°è±¡ï¼ˆè…¾è®¯å¾®ä¿¡ä¹Ÿå‡ºç°äº†åŒæ ·çš„é—®é¢˜ï¼‰ã€‚ 

ä¸‰ é—®é¢˜åˆ†æ 
   1 ç³»ç»Ÿå­˜å‚¨é”™è¯¯é—®é¢˜ï¼ˆå¦‚æ˜µç§°ï¼Œå¸–å­å†…å®¹ï¼‰
    åŸå› ï¼š
    ç”±äºIOS5.X é‡‡ç”¨æ–°çš„Unicodeï¼Œ å…¶UTF8 ç¼–ç å¤§å¤šä¸º4ä¸ªå­—èŠ‚ï¼Œ è€Œç”±äºæ˜µç§°/å¸–å­å†…å®¹columnå¹¶æ²¡è®¾æˆutf8mb4ï¼Œå› æ­¤å­˜å‚¨ä¼š    å‘ç”Ÿé”™è¯¯ã€‚
    è§£å†³æ–¹æ³•ï¼š
    å°†æ˜µç§°/å¸–å­å†…å®¹è®¾æˆutf8mb4 
General error 1366 incorrect string value
  å‘MySQLå¯¼å…¥æ•°æ®æ—¶ï¼Œå‡ºç°ä»¥ä¸‹é”™è¯¯æç¤ºï¼š
  SQLSTATE[HY000]: General error: 1366 Incorrect string value: '\\xF4\\x80\\x81\\xBA file://xE5...'/ for column 'CONTENT' at row 1 ......
  ã€åŸå› ã€‘
  è¿™æ˜¯å› ä¸º MySQL æ•°æ®åº“å­—ç¬¦é›†è®¾å®šæ˜¯ utf8ï¼Œè€Œå¯¼å…¥çš„æ•°æ®å«æœ‰é utf8 ç¼–ç çš„å­—ç¬¦ï¼ˆç‰¹åˆ«æ˜¯ä¸­æ–‡æˆ–å…¶å®ƒéè‹±æ–‡å­—ç¬¦ï¼‰ï¼Œæ‰€ä»¥å‡ºç°æ­¤é”™è¯¯ã€‚
  ã€è§£å†³ã€‘
  æ–¹æ³•1ï¼š
  æŠŠè¦å¯¼å…¥çš„æ•°æ®è½¬æ¢ä¸º utf8 ç¼–ç åå†å¯¼å…¥ã€‚ï¼ˆå¦‚æœæ˜¯txtã€csvç­‰æ–‡æœ¬æ•°æ®ï¼Œå¯ä»¥ç”¨è®°äº‹æœ¬æ‰“å¼€ï¼Œç„¶åå¦å­˜ä¸º UTF-8 ç¼–ç çš„æ–‡æœ¬å³å¯ï¼‰
  æ–¹æ³•2ï¼šï¼ˆç½‘ä¸Šä»‹ç»ï¼Œæœ¬äººæœªè¯•è¿‡ï¼‰
  1) ä¿®æ”¹ MySQL ä¸­è¦å¯¼å…¥æ•°æ®çš„æ•°æ®è¡¨å­—ç¬¦é›†ï¼Œä¾‹å¦‚ï¼šæ”¹ä¸ºä¸­æ–‡gbkå­—é›†
  mysql> alter table content modify author varchar(30) character set gbk;
  æ³¨æ„ï¼šè¦å°†æ•°æ®è¡¨é‡Œé¢çš„æ‰€æœ‰åˆ—éƒ½è¦é€ä¸€è¿™æ ·å¤„ç†ã€‚ç„¶åå†é‡æ–°å¯¼å…¥æ•°æ®ï¼Œå³å¯æˆåŠŸï¼
  2) é¡µé¢éœ€è¦å£°æ˜ç”¨GBKæˆ–è€…GB2312ç¼–ç ï¼Œè€Œä¸”åœ¨é¡µé¢éœ€è¦è¿›è¡Œè½¬ç ï¼Œä¾‹å¦‚ï¼š
  String content1 = new String(request.getParameter("content1").getBytes("ISO-8859-1"));
  é¡µé¢è¯»å–ä¸éœ€è¦è½¬ç ï¼Œå†™å…¥éœ€è¦è½¬ç ã€‚
  æ–¹æ³•3ï¼šï¼ˆç½‘ä¸Šä»‹ç»ï¼Œæœ¬äººæœªè¯•è¿‡ï¼‰
  ä¿®æ”¹æ•´ä¸ªæ•°æ®åº“çš„ç¼–ç ï¼š
  mysql> alter database testdb character set gbk;
  é˜…è¯»(7854)| è¯„è®º(1)
         
    ALTER TABLE country MODIFY COLUMN name varchar(500) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL;  


CREATE TABLE `test` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `population` INT(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=0 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

http://blog.csdn.net/renhuailin/article/details/50545604
Googleè¯´MySQLçš„utf8ä¸æ˜¯çœŸæ­£çš„UTF8ï¼Œåªèƒ½åŒ…å«ä¸‰ä¸ªå­—èŠ‚çš„unicodeï¼Œ4ä¸ªå­—èŠ‚å°±ä¼šæŠ¥é”™ã€‚è¦è§£å†³æ­¤æ€»æ˜¯éœ€è¦ä½¿ç”¨utf8mb4 è¿™ä¸ªç¼–ç ã€‚å¯æ˜¯æˆ‘æŠŠè¡¨å’Œcolumnçš„CHARSETéƒ½æ”¹æˆutf8mb4 åä»æ— æ³•å­˜å…¥Emojiå­—ç¬¦ã€‚
åŸæ¥è¿˜è¦åœ¨my.cnfé‡Œä¿®æ”¹ä¸‹mysqldçš„character-set-serverï¼ŒæŠŠå®ƒæ”¹ä¸ºutf8mb4ï¼Œç„¶åé‡å¯mysqldï¼Œå°±å¯å­˜å…¥Emojiå­—ç¬¦äº†ã€‚
/etc/mysql/my.cnf [ubuntu]
[mysqld]
character-set-server = utf8mb4
æ‰€ä»¥ï¼Œå»ºè®®å¤§å®¶ä»¥ååœ¨è®¾è®¡è¡¨æ—¶ default character set æœ€å¥½è®¾ç½®ä¸ºutf8mb4,å› ä¸ºç°åœ¨Emojiå­—ç¬¦å·²ç»å¾ˆæµè¡Œäº†ï¼Œç”¨æˆ·éš¾å…ä¼šåœ¨æµè§ˆå™¨é‡Œè¾“å…¥Emojiå­—ç¬¦ã€‚
  sudo service myssql restart

mysql> show variables like "%character%";
+--------------------------+----------------------------+
| Variable_name            | Value                      |
+--------------------------+----------------------------+
| character_set_client     | utf8                       |
| character_set_connection | utf8                       |
| character_set_database   | latin1                     |
| character_set_filesystem | binary                     |
| character_set_results    | utf8                       |
| character_set_server     | latin1                     |
| character_set_system     | utf8                       |
| character_sets_dir       | /usr/share/mysql/charsets/ |
+--------------------------+----------------------------+
8 rows in set (0.05 sec)

mysql> show variables like "%character%";
+--------------------------+----------------------------+
| Variable_name            | Value                      |
+--------------------------+----------------------------+
| character_set_client     | utf8                       |
| character_set_connection | utf8                       |
| character_set_database   | latin1                     |
| character_set_filesystem | binary                     |
| character_set_results    | utf8                       |
| character_set_server     | utf8mb4                    |
| character_set_system     | utf8                       |
| character_sets_dir       | /usr/share/mysql/charsets/ |
+--------------------------+----------------------------+
8 rows in set (0.00 sec)
