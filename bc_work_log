
setup:
  add key to gerrit settings [$ cat ~/.ssh/id_rsa.pub]
  put commit-msg inside ~/workspace/bc/MissionImpossible/.git/hooks/

http://git.niub.la/#/q/project:BC/MissionImpossible
anhye@niuba.la/K...

local test: "can not create below folder"
~/workspace/bc/MissionImpossible/runtime/logs


TBD:
  qr code scan handlers are called in multiple threads. db updating should be protected.


ssh ahye@121.43.153.62
$ ping -c 2 tz8.muder.pw
PING tz8.muder.pw (121.43.153.62) 56(84) bytes of data.
64 bytes from 121.43.153.62: icmp_seq=1 ttl=49 time=29.0 ms

tz8-dev.muder.pw

test:
http://frontend.tz8/mission/list
http://frontend.tz8/test/click-menu

-------- 2016-09-29 14:08:15
online test db:
  need to regenerate comments table:
    /home/kidd/workspace/bc/advanced/MissionImpossible/frontend/database/2016-09-20.patch.sql

dynamic cards:
to generate jobs and cards for existing checkins and period mission:
  ~/workspace/bc/advanced/MissionImpossible
  $ php yii tools/create-history-cards

mysqldump -h 10.168.76.32 -u tz8_dev -p --databases tz8_dev > /home/ahye/online_test_back.sql
  scp ahye@121.43.153.62:/home/ahye/online_test_back.sql ~/tmp/
  
[ahye@tz8-server001 wx-dev.yqtz8.com]$ php yii tools/create-history-cards

ç”Ÿæˆå†å²å‘¨æŠ¥å¡ç‰‡çš„è¾“å‡ºä¿¡æ¯[ä»…é’ˆå¯¹å‘¨æœŸæ€§ä»»åŠ¡]ï¼š 
To generate cards for weekly report
Finished generating cards for weekly report
joined_count_not_zero: 123 # joined_countä¸ä¸º0çš„ä»»åŠ¡æ•°é‡
challenge_null: 13ã€€ï¼ƒjoined_countä¸ä¸º0ä¸”ä¸å­˜åœ¨ä»»ä½•æŒ‘æˆ˜çš„ä»»åŠ¡æ•°é‡
challenge_count_not_enough: 9 # joined_countä¸ä¸º0ä¸”å­˜åœ¨æŒ‘æˆ˜ä½†æŒ‘æˆ˜æ•°å’Œjoined_countæ•°ä¸ç¬¦çš„ä»»åŠ¡æ•°é‡
creator null: 10ã€€#joined_countä¸ä¸ºï¼ä¸”åˆ›å»ºè€…ä¸å­˜åœ¨çš„ä»»åŠ¡æ•°é‡
not_started: 0ã€€ï¼ƒæœªå¼€å§‹çš„ä»»åŠ¡æ•°é‡
finished: 76ã€€ï¼ƒå·²ç»“æŸçš„ä»»åŠ¡æ•°é‡
cards: 98ã€€ï¼ƒåº”ç”Ÿæˆçš„å¡ç‰‡æ•°é‡ã€€ã€€æŸ¥çœ‹card_baseè¡¨å’Œcard_weekly_reportè¡¨
jobs: 25ã€€ï¼ƒåº”ç”Ÿæˆçš„å®šæ—¶ä»»åŠ¡æ•°é‡ã€€æŸ¥çœ‹card_jobsè¡¨
ongoing: 15ã€€ï¼ƒè¿›è¡Œä¸­çš„ä»»åŠ¡æ•°é‡

ç”Ÿæˆå†å²æ‰“å¡å¡ç‰‡çš„è¾“å‡ºä¿¡æ¯ï¼š 
 to generate cards for checkins:  
Finished generating cards for checkins
challenge_null: 143ã€€ï¼ƒç›¸åº”challengeä¸å­˜åœ¨çš„æ‰“å¡æ•°é‡
user_null: 19ã€€ï¼ƒå­˜åœ¨challengeä¸”ç›¸åº”challengeçš„ç”¨æˆ·ä¸å­˜åœ¨çš„æ‰“å¡æ•°é‡
mission_null: 0ã€€ï¼ƒå­˜åœ¨challengeç”¨æˆ·ä¸”ä»»åŠ¡ä¸å­˜åœ¨çš„æ‰“å¡æ•°é‡
time_invalid: 7 # checkin time not withing mission active period
cards: 247ã€€ï¼ƒåº”ç”Ÿæˆçš„å¡ç‰‡æ•°é‡ã€€æŸ¥çœ‹card_baseè¡¨
jobs: 0ã€€ï¼ƒåº”ç”Ÿæˆçš„å®šæ—¶ä»»åŠ¡æ•°é‡ æŸ¥çœ‹card_jobsè¡¨


------- 2016-09-20 10:53:26
deleting a user from db will lead to a lot of problems such as non-existing challenge user, mission creator, etc. many pages' access will fail.

------- 2016-09-19 11:04:22
æ•°æ®åº“æ‰‹åŠ¨ä¿®æ”¹æ–¹å¼ï¼šï¼ˆä¸¾ä¾‹å¦‚ä¸‹ï¼Œè¿™é‡Œçš„ç¬¦å·æ˜¯è„šå°ï¼‰
update user set nickname = "ğŸ‘£", username = "ğŸ‘£" where id=2;
update account set nickname = "ğŸ‘£" where id=186;

ç”¨æˆ·åç›®å‰ä¸æ”¯æŒè‡ªåŠ¨æ›´æ–°ï¼Œå› æ­¤å·²æœ‰çš„ä¹±ç åªèƒ½é€šè¿‡æ‰‹åŠ¨ä¿®æ”¹æ•°æ®åº“ã€‚

ä»»åŠ¡åç§°å’Œæè¿°ç­‰ç”±äºä¸åŒå®¢æˆ·ç«¯å‰ç«¯æ”¯æŒæœ‰å·®å¼‚ï¼ŒæœåŠ¡å™¨ç«¯æ— æ³•å¾—åˆ°æ­£ç¡®çš„è¡¨æƒ…ï¼Œæš‚ç¼“å¤„ç†éƒ¨åˆ†å®¢æˆ·ç«¯çš„ä¹±ç é—®é¢˜ã€‚

---------- 2016-09-05 17:07:04
1. wanted pay all red pack at a time, try to find if there is any possible way. [wait for PM to decide, postponed]
2. find out the account which has not accepted the redpack. (downloadbill and queryorder, testing it requires official appid and secretid, etc., postponed. watch from public account direclty.)
3. å…¬ä¼—å·æ¥æ”¶çº¢åŒ…æ ·å¼ä¸ç»Ÿä¸€ [do not know how to reproduce. the unexpected one seems to be a template.]

-------- 2016-09-02 11:06:54
a big mistake was made the day before yesterday: 
  æµ‹è¯•å·èœå•æŒ‡å‘çº¿ä¸Šäº† [php yii tools/create-wechat-menu, the added url for the menu should point to the test address, e.g., https://tz8-dev.muder.pw/mission/list]


----------- 2016-09-01 11:20:36
url sharing:
  é‚€è¯·ï¼šå·²æœ‰accountï¼Œä¸åŠ¨ï¼›æ— ï¼Œæ·»åŠ invitor.
  å…³æ³¨ï¼šæ— accountï¼Œæ·»åŠ backup; æœ‰ï¼Œæ›´æ–°invitorã€‚

---------- 2016-08-31 17:16:52
wechat will send a message after 5s if the server message is not handled timely.

test:
  to create a request into the db: http://frontend.tz8/test/qrcode-click-menu
  trigger image sending and db clear: http://frontend.tz8/test/temporary [actually to call Wechat::generateAndSendTemporaryQrcode]
  to send image directly: TestController::actionSendImage

------- 2016-08-30 10:20:16
to clone a mission: [è‡ªè¡Œå‘èµ·]
/home/kidd/workspace/bc/advanced/MissionImpossible/frontend/controllers/MissionController.php
  public function actionCreate($mt = null)
  ç‚¹å‡»è‡ªè¡Œå‘èµ·è·³è½¬å‘èµ·æŒ‘æˆ˜é¡µï¼Œæ¯æ—¥æ‰“å¡æ—¶é—´ä¸æŒ‘æˆ˜å¤©æ•°é¢„è®¾ä¸ºç›¸åŒå‚æ•°

a second temp request with the same scene id generates different tickets.
got temp ticket: gQE48DoAAAAAAAAAASxodHRwOi8vd2VpeGluLnFxLmNvbS9xL3Z6c2NtNTNsdkR6Rjk1TTdlQlZtAAIEGAjFVwMEPAAAAA==
got temp ticket: gQEv7zoAAAAAAAAAASxodHRwOi8vd2VpeGluLnFxLmNvbS9xL3Z6djlaMW5sVmp3dno1UE1tUlZtAAIEewzFVwMEPAAAAA==


<img src="https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket=<?= Html::encode($ticket) ?>" />

----------- 2016-08-29 11:45:40

6.ã€å‘¨æœŸæŒ‘æˆ˜ã€‘è¸©è¶…è¿‡50%ï¼Œå›¾ç‰‡æ˜¾ç¤ºçŠ¶æ€æœªæ”¹å˜ ï¼»åç«¯é…åˆï¼½
7.ã€å‘¨æœŸæŒ‘æˆ˜ã€‘ã€å‘èµ·æŒ‘æˆ˜ã€‘æ— æ³•åŠ å…¥æƒ…å†µï¼Œè‡ªè¡Œå‘èµ·æŒ‘æˆ˜ï¼ŒæŒ‘æˆ˜å‚æ•°é¢„è®¾ï¼»åç«¯é…åˆï¼Œæ–°åŠŸèƒ½ï¼½
8.ã€å‘¨æœŸæŒ‘æˆ˜ã€‘ã€åŠ å…¥æŒ‘æˆ˜ã€‘å½“å‰å‘¨ä¸è¶³æ‰“å¡æ¬¡æ•°ï¼ŒåŠ å…¥æŒ‘æˆ˜æƒ…å†µ ï¼»åç«¯æ”¯æŒï¼½

7. 
http://10.12.0.24/#g=1&p=2_1_%E6%97%A0%E6%B3%95%E5%8A%A0%E5%85%A5

--------- 2016-08-23 17:04:59

ã€å‘¨æœŸæŒ‘æˆ˜ã€‘å‘èµ·ã€åŠ å…¥ã€æ‰“å¡ç›®å‰ä¸»è¦é—®é¢˜å¦‚ä¸‹ï¼š
å‘èµ·æŒ‘æˆ˜ï¼š1.å–æ¶ˆå…è®¸ä»–äººåŠ å…¥ï¼Œå‘èµ·æŒ‘æˆ˜ä¸èƒ½æˆåŠŸ fixed 
                 2.æ— æ³•åŠ å…¥çš„æƒ…å†µï¼Œè‡ªè¡Œå‘èµ·æŒ‘æˆ˜ï¼ŒæŒ‘æˆ˜å‚æ•°æ²¡æœ‰é¢„è®¾ä¸ºç›¸åŒå‚æ•° ignore as of now

åŠ å…¥æŒ‘æˆ˜ï¼š1.å¾®ä¿¡åˆ†äº«æ²¡æœ‰ liang
                 2.é‚€è¯·åŠ å…¥é¡µï¼ŒæŸ¥çœ‹å‚ä¸äººè¯¦æƒ…ï¼Œå‘èµ·äººä¸å¯¹ï¼Œ fixed
                 3.å½“å‰å‘¨ä¸è¶³æ‰“å¡æ¬¡æ•°ï¼ŒåŠ å…¥æŒ‘æˆ˜æœ‰é—®é¢˜ï¼Œæç¤ºå·²æˆªæ­¢åŠ å…¥ ignore as of now
    
æ‰“å¡ï¼š 1.ä¸Šä¼ å›¾ç‰‡ï¼Œæ²¡æœ‰æˆåŠŸæç¤ºï¼Œæ²¡æœ‰æ˜¾ç¤ºä¸Šä¼ çš„å›¾ç‰‡ã€‚
           2.æ‰“å¡åŠ¨æ€ä¸­ï¼Œæ‰“å¡ä¿¡æ¯åªæœ‰æ‰“å¡æˆåŠŸçš„æ–‡æ¡ˆæç¤ºã€‚
 è¸©èµï¼šè¸©/èµæœ‰é—®é¢˜
         1.1ä¸ªäººå¯åŒæ—¶åšè¸©ã€èµæ“ä½œ
         2.å¯èµå¤šæ¬¡
         3.è¸©æœ‰å¤šç§çŠ¶æ€ï¼š1ã€2ã€â€œè¸©â€ã€-1

------------ 2016-08-19 10:44:05
to do:
MissionManager::getCheckinDesc, to merge arrays (frontend is using for .. in only, who does not want to traverse arrays again and again. Poor frontend template. OMG.)

----------- 2016-08-04 20:58:28

controllers/TestController.php:37

------------ 2016-08-01 19:44:05
å‘¨å·¥ä½œç›®æ ‡ï¼š5å¤©ï¼ˆ8-1 ~ 8-5ï¼‰
ï¼‘ã€é€šè¿‡ç½‘é¡µæ“ä½œæ–¹å¼ç”Ÿæˆå¸¦å‚æ•°çš„äºŒç»´ç å›¾ç‰‡ï¼ˆé•¿æœŸæœ‰æ•ˆï¼‰
ï¼’ã€æ­å»ºæœåŠ¡å™¨æµ‹è¯•å¹¶å¤„ç†å¾®ä¿¡æœåŠ¡å™¨ç«¯æ‰€æ¨é€æ¶ˆæ¯
ï¼“ã€é€šè¿‡webé¡µé¢ç®€å•å±•ç¤ºç»Ÿè®¡ç»“æœã€‚

æœåŠ¡å™¨ç«¯åŸºäºyiiã€‚

åæœŸè®¡åˆ’ï¼šè‡ªåŠ¨å›å¤ä»¥åŠè‡ªå®šä¹‰èœå•æœåŠ¡å™¨ç«¯æ›¿ä»£æ–¹æ¡ˆï¼Œæ—¶é—´å®‰æ’æ ¹æ®å¾®ä¿¡å…¬ä¼—å¹³å°å¼€å‘çš„ç†Ÿæ‚‰åº¦å¾…å®šã€‚

